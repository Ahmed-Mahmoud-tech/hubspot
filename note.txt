i need to create plans

HubSpot Contact Merge Plan System Requirements:

Plan Structure:

Two tiers: Free Plan and Paid Plan

Free Plan features:

20 merge groups per month

500,000 contact storage limit

1-month duration from activation

No cost

Paid Plan features:

Unlimited merge groups

Dynamic pricing based on contact count

Monthly/Yearly billing options

Pricing Logic:

Monthly: $1 per 2,000 contacts/month
cost = contact_count / 2000

Yearly: $1 per 4,000 contacts/month (50% discount)
monthly_cost = contact_count / 4000
annual_cost = monthly_cost * 12

User Flow:

After duplicate detection:
a. Always show Free Plan option first
b. Show Paid Plan upgrade option when:

Merge groups > 20

Account age > 1 month

Contact count > current plan limit

Upgrade Rules:

Prevent downgrading below current contact count

Prorated upgrades:

text
remaining_days = (billing_end_date - today).days
daily_rate = (new_monthly_cost - current_monthly_cost) / 30
upgrade_fee = daily_rate * remaining_days
New billing cycle starts immediately after payment

Notifications:

Email reminders 2 days before:

Free plan expiration

Paid plan renewal

Usage alerts when:

80% of free merge groups used

Contact count approaches plan limit

Storage Rules:

Free Plan: Hard limit at 500k contacts

Paid Plan: Auto-calculate pricing on:

Initial subscription

Contact count changes

Manual plan updates

Payment Scenarios:
Example 1: Mid-cycle upgrade

Current: 100k contacts @ $50/month (15 days used)

New: 150k contacts @ $75/month

Charge: $12.50 (prorated for 15 days)

Example 2: Yearly conversion

100k contacts:

Monthly: $50/month

Yearly: $25/month ($300 total)

Error Handling:

Block actions when:

Free user exceeds merge groups

Contact limit exceeded

Payment required

Clear error messages with upgrade CTAs

Data Requirements:

Track per user:

Plan type

Activation date

Merge credits used

Contact count

Payment status

create also the payment using stripe